
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Migrating from V1 Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Troubleshooting.html" />
    
    
    <link rel="prev" href="Getting-Started/NestingWrappers.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Table of Contents</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Read Me
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Getting-Started/Overview.html">
            
                <a href="Getting-Started/Overview.html">
            
                    
                    Getting Starting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="Getting-Started/ReactRouter3.html">
            
                <a href="Getting-Started/ReactRouter3.html">
            
                    
                    React Router 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="Getting-Started/ReactRouter4.html">
            
                <a href="Getting-Started/ReactRouter4.html">
            
                    
                    React Router 4
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="Getting-Started/ReactNative.html">
            
                <a href="Getting-Started/ReactNative.html">
            
                    
                    React Native
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="Getting-Started/HidingAlternate.html">
            
                <a href="Getting-Started/HidingAlternate.html">
            
                    
                    Hiding and Alternate Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="Getting-Started/NestingWrappers.html">
            
                <a href="Getting-Started/NestingWrappers.html">
            
                    
                    Nesting Wrappers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="Migrating.html">
            
                <a href="Migrating.html">
            
                    
                    Migrating from V1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Troubleshooting.html">
            
                <a href="Troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="API.html">
            
                <a href="API.html">
            
                    
                    API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Advanced Usage
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="AdvancedUsage/OtherRouters.html">
            
                <a href="AdvancedUsage/OtherRouters.html">
            
                    
                    Integrating with other Routers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="AdvancedUsage/ReactRouter3.html">
            
                <a href="AdvancedUsage/ReactRouter3.html">
            
                    
                    React Router3 and SSR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="AdvancedUsage/Redux.html">
            
                <a href="AdvancedUsage/Redux.html">
            
                    
                    Advanced Redux
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Migrating from V1</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="migrating-from-version-1x-to-version-2x">Migrating from Version 1.x to Version 2.x</h1>
<h2 id="motivation-for-2x">Motivation for 2.x</h2>
<p>redux-auth-wrapper has really changed a lot since it was first designed as a small specialized utility for handling redirection with react-router-redux. Since then, it has been adopted by many developers and they&apos;ve used it in numerous unforeseen and useful ways such as hiding components, displaying alternate components, and integrating with other routers. Additionally, redux-auth-wrapper needed to support two version of React Router (3 and 4) which had very different APIs. Therefore, version 2.x breaks redux-auth-wrapper into many more small, composable pieces. redux-auth-wrapper still provides a simple import for those looking to get started quickly with React Router, but also allows for developers to import the building blocks to create redirection wrappers that work with any router (or history directly). You can even use redux-auth-wrapper 2.x in a project without redux or even routing.</p>
<p>The largest change is that wrappers that perform redirection have been split from those that hide or display alternate components using <code>FailureComponent</code>.
This made practical sense since using a FailureComponent disabled the redirection, yet the wrapper would still complain
about missing redirection helpers like <code>history</code> even when they would not be used. Now you can use Failure Component wrappers
without even a router.</p>
<h2 id="migrating-redirection-wrappers">Migrating redirection wrappers</h2>
<p>The main changes are the following:</p>
<ul>
<li>Combined <code>authSelector</code> and <code>predicate</code> into a single <code>authenticatedSelector</code></li>
<li>No longer passed <code>authData</code> as a prop to child components. This was the return value of <code>authSelector</code>. If you need your auth data, just connect it at a lower level.</li>
<li>renamed <code>LoadingComponent</code> to <code>AuthenticatingComponent</code></li>
<li>renamed <code>failureRedirectPath</code> to <code>redirectPath</code></li>
<li><code>redirectPath</code> no longer defaults to <code>/login</code></li>
<li>removed <code>FailureComponent</code> from the redirect helper, see <a href="#migrating-failure-and-alternative-components">Migrating failure and alternative components</a> for details</li>
<li>Removed <code>mapProps</code>. If you need to prevent passing down any props from redux-auth-wrapper, use <code>mapProps</code> from recompose.</li>
</ul>
<p>Previously:</p>
<p>v1.x:</p>
<pre><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> UserAuthWrapper <span class="token punctuation">}</span> from <span class="token string">&apos;redux-auth-wrapper&apos;</span>

<span class="token keyword">const</span> UserIsAuthenticated <span class="token operator">=</span> <span class="token function">UserAuthWrapper</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  authSelector<span class="token punctuation">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
  authenticatingSelector<span class="token punctuation">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>isLoading<span class="token punctuation">,</span>
  LoadingComponent<span class="token punctuation">:</span> Loading<span class="token punctuation">,</span>
  redirectAction<span class="token punctuation">:</span> routerActions<span class="token punctuation">.</span>replace<span class="token punctuation">,</span>
  wrapperDisplayName<span class="token punctuation">:</span> <span class="token string">&apos;UserIsAuthenticated&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>v2.x:</p>
<pre><code class="lang-js"><span class="token comment" spellcheck="true">// NOTE: use history3 because coming from React Router 2/3. If planning to upgrade to React Router 4 use history4</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connectedReduxRedirect <span class="token punctuation">}</span> from <span class="token string">&apos;redux-auth-wrapper/history3/redirect&apos;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> userIsAuthenticated <span class="token operator">=</span> <span class="token function">connectedRouterRedirect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  redirectPath<span class="token punctuation">:</span> <span class="token string">&apos;/login&apos;</span><span class="token punctuation">,</span>
  authenticatedSelector<span class="token punctuation">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>data <span class="token operator">!</span><span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  authenticatingSelector<span class="token punctuation">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>isLoading<span class="token punctuation">,</span>
  AuthenticatingComponent<span class="token punctuation">:</span> Loading<span class="token punctuation">,</span>
  redirectAction<span class="token punctuation">:</span> routerActions<span class="token punctuation">.</span>replace<span class="token punctuation">,</span>
  wrapperDisplayName<span class="token punctuation">:</span> <span class="token string">&apos;UserIsAuthenticated&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p><strong>Note:</strong> If not using <code>redirectAction</code>, import <code>connectedRouterRedirect</code> instead.</p>
<h2 id="migrating-failure-and-alternative-components">Migrating failure and alternative components</h2>
<ul>
<li>Combined <code>authSelector</code> and <code>predicate</code> into a single <code>authenticatedSelector</code></li>
<li>FailureComponent is optional now, not specifying it will render nothing (null) when the <code>authenticatedSelector</code> returns false</li>
<li>All properties besides <code>authenticatedSelector</code>, <code>authenticatingSelector</code>, <code>FailureComponent</code>, and <code>wrapperDisplayName</code> have been removed</li>
</ul>
<h3 id="hiding-components">Hiding Components</h3>
<p>v1.x</p>
<pre><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> UserAuthWrapper <span class="token punctuation">}</span> from <span class="token string">&apos;redux-auth-wrapper&apos;</span>


<span class="token keyword">const</span> VisibleOnlyAdmin <span class="token operator">=</span> <span class="token function">UserAuthWrapper</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  authSelector<span class="token punctuation">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">,</span>
  wrapperDisplayName<span class="token punctuation">:</span> <span class="token string">&apos;VisibleOnlyAdmin&apos;</span><span class="token punctuation">,</span>
  predicate<span class="token punctuation">:</span> user <span class="token operator">=</span><span class="token operator">&gt;</span> user<span class="token punctuation">.</span>isAdmin<span class="token punctuation">,</span>
  FailureComponent<span class="token punctuation">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Applying to a function component for simplicity but could be Class or createClass component</span>
<span class="token keyword">const</span> AdminOnlyLink <span class="token operator">=</span> <span class="token function">VisibleOnlyAdmin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&apos;/admin&apos;</span><span class="token operator">&gt;</span>Admin Section<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre>
<p>v2.x</p>
<pre><code class="lang-js"><span class="token keyword">import</span> authWrapper from <span class="token string">&apos;redux-auth-wrapper/authWrapper&apos;</span>

<span class="token keyword">const</span> visibleOnlyAdmin <span class="token operator">=</span> <span class="token function">authWrapper</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  authenticatedSelector<span class="token punctuation">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>user <span class="token operator">!</span><span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>isAdmin<span class="token punctuation">,</span>
  wrapperDisplayName<span class="token punctuation">:</span> <span class="token string">&apos;VisibleOnlyAdmin&apos;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="alternate-components">Alternate Components</h3>
<p>v1.x</p>
<pre><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> UserAuthWrapper <span class="token punctuation">}</span> from <span class="token string">&apos;redux-auth-wrapper&apos;</span>

<span class="token keyword">const</span> AdminOrElse <span class="token operator">=</span> <span class="token punctuation">(</span>Component<span class="token punctuation">,</span> FailureComponent<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">UserAuthWrapper</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  authSelector<span class="token punctuation">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">,</span>
  wrapperDisplayName<span class="token punctuation">:</span> <span class="token string">&apos;AdminOrElse&apos;</span><span class="token punctuation">,</span>
  predicate<span class="token punctuation">:</span> user <span class="token operator">=</span><span class="token operator">&gt;</span> user<span class="token punctuation">.</span>isAdmin<span class="token punctuation">,</span>
  FailureComponent
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Show Admin dashboard to admins and user dashboard to regular users</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&apos;/dashboard&apos;</span> component<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">AdminOrElse</span><span class="token punctuation">(</span>AdminDashboard<span class="token punctuation">,</span> UserDashboard<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<p>v2.x</p>
<pre><code class="lang-js"><span class="token keyword">import</span> authWrapper from <span class="token string">&apos;redux-auth-wrapper/authWrapper&apos;</span>

<span class="token keyword">const</span> AdminOrElse <span class="token operator">=</span> <span class="token punctuation">(</span>Component<span class="token punctuation">,</span> FailureComponent<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">UserAuthWrapper</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  authenticatedSelector<span class="token punctuation">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>user <span class="token operator">!</span><span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>isAdmin<span class="token punctuation">,</span>
  wrapperDisplayName<span class="token punctuation">:</span> <span class="token string">&apos;AdminOrElse&apos;</span><span class="token punctuation">,</span>
  FailureComponent
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Getting-Started/NestingWrappers.html" class="navigation navigation-prev " aria-label="Previous page: Nesting Wrappers">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Troubleshooting.html" class="navigation navigation-next " aria-label="Next page: Troubleshooting">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Migrating from V1","level":"1.3","depth":1,"next":{"title":"Troubleshooting","level":"1.4","depth":1,"path":"docs/Troubleshooting.md","ref":"docs/Troubleshooting.md","articles":[]},"previous":{"title":"Nesting Wrappers","level":"1.2.5","depth":2,"path":"docs/Getting-Started/NestingWrappers.md","ref":"docs/Getting-Started/NestingWrappers.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"3.2.2","theme":"default","variables":{},"plugins":["prism@1.0.0","-highlight","github","github-edit","heading-anchors","ga@1.0.1"],"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/mjrussell/redux-auth-wrapper"},"search":{},"lunr":{"ignoreSpecialCharacters":false,"maxIndexSize":1000000},"fontsettings":{"family":"sans","size":2,"theme":"white"},"heading-anchors":{},"github-edit":{"repo":"mjrussell/redux-auth-wrapper","branch":"master"},"ga":{"configuration":"auto","token":"UA-102064405-1"},"sharing":{"all":["facebook","google","twitter","weibo","instapaper"],"facebook":false,"google":false,"instapaper":false,"twitter":true,"vk":false,"weibo":false},"theme-default":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}},"file":{"path":"docs/Migrating.md","mtime":"2017-07-05T04:52:04.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-07-05T20:02:23.483Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github-edit/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.2.1/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-heading-anchors/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

